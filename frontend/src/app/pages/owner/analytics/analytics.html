<app-navbar role="owner"></app-navbar>

<div class="px-6 py-6 space-y-8">

  <!-- TOP ROW -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">

    <!-- Order Counts -->
    <div class="border border-gray-300 rounded-lg overflow-hidden bg-white">
      <div class="bg-[#9B1C1F] text-white px-4 py-2 font-semibold">
        Order Counts
      </div>

      <div class="p-5">
        <div class="grid grid-cols-3 gap-4">

          <div class="bg-[#9B1C1F]/10 border border-[#9B1C1F]/20 p-8 text-center rounded-md">
            <div class="text-4xl font-semibold text-gray-900">{{ orderCounts.day }}</div>
            <div class="mt-2 font-semibold text-gray-900">Day</div>
          </div>

          <div class="bg-[#9B1C1F]/10 border border-[#9B1C1F]/20 p-8 text-center rounded-md">
            <div class="text-4xl font-semibold text-gray-900">{{ orderCounts.week }}</div>
            <div class="mt-2 font-semibold text-gray-900">Week</div>
          </div>

          <div class="bg-[#9B1C1F]/10 border border-[#9B1C1F]/20 p-8 text-center rounded-md">
            <div class="text-4xl font-semibold text-gray-900">{{ orderCounts.month }}</div>
            <div class="mt-2 font-semibold text-gray-900">Month</div>
          </div>

        </div>
      </div>
    </div>

    <!-- Monthly Overview -->
    <div class="border border-gray-300 rounded-lg overflow-hidden bg-white">
      <div class="bg-[#9B1C1F] text-white px-4 py-2 font-semibold">
        Monthly Overview
      </div>

      <div class="p-5">
        <div class="border border-gray-300 p-3 rounded-md bg-white">
          <div class="w-full h-56">
            <canvas
              baseChart
              [data]="monthlyChartData"
              [type]="monthlyChartType"
              [options]="monthlyChartOptions"
            ></canvas>
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- Popular Items -->
  <div class="border border-gray-300 rounded-lg overflow-hidden bg-white">
    <div class="bg-[#9B1C1F] text-white px-4 py-2 font-semibold">
      Popular Items
    </div>

    <div class="px-4 pb-4">
      <table class="w-full text-left table-fixed border-collapse">
        <thead>
          <tr class="text-sm text-gray-700 border-b border-gray-300">
            <th class="py-3 w-56 font-semibold text-center">Rank</th>
            <th class="py-3 w-56 font-semibold text-center">Dish Name</th>
            <th class="py-3 w-56 font-semibold text-center">Total Orders</th>
            <th class="py-3 w-56 font-semibold text-center">Revenue</th>
          </tr>
        </thead>

        <tbody>
          <tr
            *ngFor="let item of popularItems; let i = index"
            class="border-b border-gray-200 hover:bg-[#9B1C1F]/5 transition"
          >
            <td class="py-4 text-center font-semibold">{{ i + 1 }}</td>
            <td class="py-4 text-center">{{ item.name }}</td>
            <td class="py-4 text-center font-semibold">{{ item.sold }}</td>
            <td class="py-4 text-center font-semibold">â‚¬{{ item.revenue | number:'1.0-2' }}</td>
          </tr>

          <tr *ngIf="popularItems.length === 0">
            <td colspan="4" class="py-8 text-center text-gray-500">
              No items yet.
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Reviews -->
  <div class="border border-gray-300 rounded-lg overflow-hidden bg-white">
    <div class="bg-[#9B1C1F] text-white px-4 py-2 font-semibold">
      Reviews
    </div>

    <div class="px-4 pb-4">
      <table class="w-full text-left table-fixed border-collapse">
        <thead>
          <tr class="text-sm text-gray-700 border-b border-gray-300">
            <th class="py-3 w-56 font-semibold text-center">Index</th>
            <th class="py-3 w-56 font-semibold text-center">Date</th>
            <th class="py-3 w-56 font-semibold text-center">Rating</th>
            <th class="py-3 w-56 font-semibold text-center">Action</th>
          </tr>
        </thead>

        <tbody>
          <tr
            *ngFor="let r of reviews"
            class="border-b border-gray-200 hover:bg-[#9B1C1F]/5 transition"
          >
            <td class="py-4 text-center font-semibold">{{ r.orderId }}</td>
            <td class="py-4 text-center ">{{ r.date }}</td>
            <td class="py-4 text-center font-semibold">{{ r.rating }}</td>

            <td class="py-4">
              <div class="flex items-center justify-center gap-3">
                <button
                  (click)="viewReview(r)"
                  class="px-6 py-1 rounded-full border border-gray-400 bg-white
                         hover:border-[#9B1C1F] hover:text-[#9B1C1F] transition"
                  type="button"
                >
                  View
                </button>

                <button
                  (click)="reportReview(r)"
                  class="px-6 py-1 rounded-full border border-gray-400 bg-white
                         hover:border-[#9B1C1F] hover:text-[#9B1C1F] transition"
                  type="button"
                >
                  Report
                </button>
              </div>
            </td>
          </tr>

          <tr *ngIf="reviews.length === 0">
            <td colspan="4" class="py-8 text-center text-gray-500">
              No reviews yet.
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

</div>
