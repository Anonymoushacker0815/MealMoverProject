<app-navbar role="owner"></app-navbar>

<div class="px-6 py-6">
  <div class="border border-gray-300 rounded-2xl overflow-hidden shadow-sm bg-white">

    <!-- HEADER -->
    <div class="bg-gray-300 px-5 py-3 flex justify-between items-center">
      <div class="flex items-center gap-3">
        <span class="font-semibold text-lg">Profile</span>

        <!-- Editing badge -->
        <span
          *ngIf="isEditing"
          class="text-xs px-3 py-1 rounded-full bg-white border border-[#7B1E1E] text-[#7B1E1E]"
        >
          Editing…
        </span>
      </div>

      <div class="flex gap-2">
        <button
          *ngIf="!isEditing"
          (click)="startEdit()"
          class="px-4 py-2 rounded-xl border border-gray-300 bg-white
                 hover:border-[#7B1E1E] hover:text-[#7B1E1E] transition"
          type="button"
        >
          Edit
        </button>

        <ng-container *ngIf="isEditing">
          <button
            (click)="saveProfile()"
            class="px-4 py-2 rounded-xl bg-[#7B1E1E] text-white font-medium
                   hover:opacity-95 transition"
            type="button"
          >
            Save
          </button>
          <button
            (click)="cancelEdit()"
            class="px-4 py-2 rounded-xl border border-gray-300 bg-white
                   hover:border-gray-400 transition"
            type="button"
          >
            Cancel
          </button>
        </ng-container>
      </div>
    </div>

    <!-- BODY -->
    <div class="p-6 grid grid-cols-1 lg:grid-cols-12 gap-8">

      <!-- LEFT: Avatar + Profile Data -->
      <div class="lg:col-span-8 flex flex-col lg:flex-row gap-8 items-start">

        <!-- Avatar -->
        <div class="shrink-0 w-full lg:w-auto flex justify-center lg:justify-start">
          <div class="relative">
            <div
              class="w-52 h-52 lg:w-60 lg:h-60 rounded-full bg-gray-200
                     border border-gray-300 shadow-inner
                     flex items-center justify-center"
            >
              <span class="text-5xl lg:text-6xl font-semibold text-gray-600">
                MM
              </span>
            </div>

            <div class="mt-3 text-center text-sm text-gray-500">
              Restaurant Logo
            </div>
          </div>
        </div>

        <!-- PROFILE DATA -->
        <div class="flex-1 w-full">
          <div class="rounded-2xl border border-gray-200 bg-gray-50 p-6">
            <div class="space-y-6">

              <!-- Restaurant Name -->
              <div class="flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-6">
                <div class="sm:w-56 whitespace-nowrap text-sm font-semibold text-gray-600">
                  Restaurant Name
                </div>

                <div class="flex-1">
                  <div *ngIf="!isEditing" class="text-2xl font-semibold text-gray-900">
                    {{ profile.restaurantName }}
                  </div>

                  <input
                    *ngIf="isEditing"
                    [(ngModel)]="profile.restaurantName"
                    class="w-full px-3 py-2 rounded-xl border border-gray-300 bg-white
                           focus:border-[#7B1E1E] focus:ring-1 focus:ring-[#7B1E1E]
                           focus:outline-none transition"
                  />
                </div>
              </div>

              <div class="h-px bg-gray-200"></div>

              <!-- Email -->
              <div class="flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-6">
                <div class="sm:w-56 whitespace-nowrap text-sm font-semibold text-gray-600">
                  Email
                </div>

                <div class="flex-1">
                  <div *ngIf="!isEditing" class="text-lg font-medium text-gray-900">
                    {{ profile.email }}
                  </div>

                  <input
                    *ngIf="isEditing"
                    [(ngModel)]="profile.email"
                    type="email"
                    class="w-full px-3 py-2 rounded-xl border border-gray-300 bg-white
                           focus:border-[#7B1E1E] focus:ring-1 focus:ring-[#7B1E1E]
                           focus:outline-none transition"
                  />
                </div>
              </div>

              <div class="h-px bg-gray-200"></div>

              <!-- Phone -->
              <div class="flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-6">
                <div class="sm:w-56 whitespace-nowrap text-sm font-semibold text-gray-600">
                  Phone
                </div>

                <div class="flex-1">
                  <div *ngIf="!isEditing" class="text-lg font-medium text-gray-900">
                    {{ profile.phone }}
                  </div>

                  <input
                    *ngIf="isEditing"
                    [(ngModel)]="profile.phone"
                    type="text"
                    class="w-full px-3 py-2 rounded-xl border border-gray-300 bg-white
                           focus:border-[#7B1E1E] focus:ring-1 focus:ring-[#7B1E1E]
                           focus:outline-none transition"
                  />
                </div>
              </div>

              <div class="h-px bg-gray-200"></div>

              <!-- Delivery Zone -->
              <div class="flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-6">
                <div class="sm:w-56 whitespace-nowrap text-sm font-semibold text-gray-600">
                  Delivery Zone
                </div>

                <div class="flex-1">
                  <div *ngIf="!isEditing" class="text-lg font-medium text-gray-900">
                    {{ profile.deliveryZone }}
                  </div>

                  <input
                    *ngIf="isEditing"
                    [(ngModel)]="profile.deliveryZone"
                    type="text"
                    class="w-full px-3 py-2 rounded-xl border border-gray-300 bg-white
                           focus:border-[#7B1E1E] focus:ring-1 focus:ring-[#7B1E1E]
                           focus:outline-none transition"
                  />
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>

      <!-- RIGHT: OPENING HOURS -->
      <div class="lg:col-span-4">
        <div class="bg-gray-50 rounded-2xl p-6 border border-gray-200 shadow-sm">

          <!-- Header -->
          <div class="flex flex-col items-center gap-3 mb-6">
            <p class="font-semibold text-xl">Opening Hours</p>

            <button
              *ngIf="isEditing"
              (click)="setAllWeekdays('09:00','18:00')"
              class="text-sm px-3 py-1.5 rounded-xl border border-gray-300 bg-white
                     hover:border-[#7B1E1E] transition"
              type="button"
            >
              Mon–Fri 09–18
            </button>
          </div>

          <!-- VIEW MODE -->
          <div *ngIf="!isEditing" class="space-y-3 flex flex-col items-center text-base">
            <div
              *ngFor="let day of days; trackBy: trackByDay"
              class="flex items-center gap-6"
            >
              <span class="w-12 font-semibold text-right">
                {{ openingHours[day].label }}
              </span>

              <span *ngIf="openingHours[day].closed" class="text-gray-500 italic">
                Closed
              </span>

              <span *ngIf="!openingHours[day].closed" class="text-gray-900">
                {{ openingHours[day].open }} – {{ openingHours[day].close }}
              </span>
            </div>

            <div class="mt-6 text-sm text-gray-500 text-center">
              Click “Edit” to change opening hours.
            </div>
          </div>

          <!-- EDIT MODE -->
          <div *ngIf="isEditing" class="space-y-4 flex flex-col items-center">
            <div
              *ngFor="let day of days; trackBy: trackByDay"
              class="flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4"
            >
              <span class="w-12 font-semibold text-right">
                {{ openingHours[day].label }}
              </span>

              <label class="flex items-center gap-2 text-sm text-gray-700">
                <input type="checkbox" [(ngModel)]="openingHours[day].closed" />
                Closed
              </label>

              <input
                type="time"
                [(ngModel)]="openingHours[day].open"
                [disabled]="openingHours[day].closed"
                class="px-3 py-2 rounded-xl border border-gray-300 bg-white
                       disabled:bg-gray-200 disabled:text-gray-500
                       focus:border-[#7B1E1E] focus:ring-1 focus:ring-[#7B1E1E]
                       focus:outline-none transition"
              />

              <span class="text-gray-500 hidden sm:inline">–</span>

              <input
                type="time"
                [(ngModel)]="openingHours[day].close"
                [disabled]="openingHours[day].closed"
                class="px-3 py-2 rounded-xl border border-gray-300 bg-white
                       disabled:bg-gray-200 disabled:text-gray-500
                       focus:border-[#7B1E1E] focus:ring-1 focus:ring-[#7B1E1E]
                       focus:outline-none transition"
              />
            </div>
          </div>

        </div>
      </div>

    </div>
  </div>
</div>
